<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Orders</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        .order-card {
            background: #ffffff;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .order-card:hover {
            transform: translateY(-5px);
        }

        .status-badge {
            padding: 8px 15px;
            border-radius: 10px;
            font-size: 0.9rem;
        }

        .order-table thead th {
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
        }

        .order-actions .btn {
            padding: 5px 12px;
            margin: 2px;
            border-radius: 8px;
        }

        .search-box {
            max-width: 300px;
            border-radius: 25px;
        }

        .stats-card {
            background: linear-gradient(45deg, #6c5ce7, #a8a4e6);
            color: white;
            border-radius: 15px;
        }
    </style>
</head>

<body class="bg-light">
    <div class="container-fluid py-4">
        <!-- Header Section -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="fw-bold text-dark">Order Management</h2>
            <div class="d-flex align-items-center">
                <!-- Filter Dropdown -->
                <div class="dropdown me-3">
                    <select class="form-select float-end" [(ngModel)]="selectedDateFilter" (change)="applyFilters()">
                        <option value="Every Day">Every Day</option>
                        <option value="Today">Today</option>
                        <option value="Last 7 Days">Last 7 Days</option>
                        <option value="Last 30 Days">Last 30 Days</option>
                    </select>
                </div>
                <div class="input-group search-box">
                    <input type="text" class="form-control border-start-0" placeholder="🔍 Search orders..."
                        [(ngModel)]="searchQuery" (input)="applyFilters()">
                </div>
            </div>
            
        </div>
    </div>


    <!-- Stats Cards -->
    <div class="row mb-4 g-4">
        <div class="col-12 col-sm-6 col-xl-3">
            <div class="stats-card p-4">
                <h5>Total Orders</h5>
                <h2 class="mb-0">{{total_orders}}</h2>
                <i class="bi bi-cart-check fs-3 float-end"></i>
            </div>
        </div>
        <div class="col-12 col-sm-6 col-xl-3">
            <div class="stats-card p-4">
                <h5>Total Revenue</h5>
                <h2 class="mb-0">{{total_revenue}}</h2>
                <i class="bi bi-currency-rupee fs-3 float-end"></i>
            </div>
        </div>
        <div class="col-12 col-sm-6 col-xl-3">
            <div class="stats-card p-4">
                <h5>Pending Orders</h5>
                <h2 class="mb-0">{{total_pending}}</h2>
                <i class="bi bi-clock-history fs-3 float-end"></i>
            </div>
        </div>
        <div class="col-12 col-sm-6 col-xl-3">
            <div class="stats-card p-4">
                <h5>Delivered</h5>
                <h2 class="mb-0">{{total_delivered}}</h2>
                <i class="bi bi-truck fs-3 float-end"></i>
            </div>
        </div>
    </div>


    <div class="container mt-4">
        <!-- Heading & Status Filter Buttons -->
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-3 text-center">
                    <h2 class="fw-bold">Furni Orders</h2>
                </div>
                <div class="col-md-9 d-flex flex-wrap gap-2 justify-content-md-end">
                    <button class="status-btn btn btn-outline-primary px-3" [class.active]="selectedStatus === 'All'"
                        (click)="setStatus('All')">All Status</button>
                    <button class="status-btn btn btn-outline-warning px-3"
                        [class.active]="selectedStatus === 'Pending'" (click)="setStatus('Pending')">Pending</button>
                    <button class="status-btn btn btn-outline-info px-3" [class.active]="selectedStatus === 'Confirmed'"
                        (click)="setStatus('Confirmed')">Confirmed</button>
                    <button class="status-btn btn btn-outline-success px-3"
                        [class.active]="selectedStatus === 'Delivered'"
                        (click)="setStatus('Delivered')">Delivered</button>
                    <button class="status-btn btn btn-outline-danger px-3"
                        [class.active]="selectedStatus === 'Cancelled'"
                        (click)="setStatus('Cancelled')">Cancelled</button>
                </div>
            </div>
        </div><br>

        <!-- Orders Table -->
        <div class="order-card p-4">
            <div class="table-responsive">
                <table class="order-table table table-hover align-middle">
                    <thead>
                        <tr>
                            <th>Order ID</th>
                            <th style="width: 25%;">Products</th>
                            <th>Customer</th>
                            <th>Address</th>
                            <th>Date</th>
                            <th>Amount</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Sample Data - Repeat this row for each order -->
                        <tr *ngFor="let order of filteredOrders">
                            <td>#FURNI{{ order.order_id }}</td>
                            <td>
                                <ul class="list-unstyled mb-1">
                                    <li *ngFor="let product of order.products.split(', '); let i=index;"
                                        class="text-start">
                                        <i class="fas fa-cube text-primary"></i> {{ i + 1 }}. {{ product }}
                                    </li>
                                </ul>
                            </td>
                            <td>
                                <div class="d-flex align-items-center">
                                    <img src="https://via.placeholder.com/40" class="rounded-circle me-2">
                                    {{ order.c_fname }} {{ order.c_lname }}
                                </div>
                            </td>
                            <td>
                                {{ order.c_address }}<br> {{ order.c_state }} - {{ order.c_postal_zip }}
                            </td>
                            <td>{{ order.order_date | date:'dd-MM-yyyy' }}</td>
                            <td>&#8377; {{ order.final_total | number:'1.2-2' }}</td>
                            <td>
                                <span class="badge" [ngClass]="{
                                'bg-success': order.order_status === 'Delivered',
                                'bg-warning': order.order_status === 'Pending',
                                'bg-info': order.order_status === 'Confirmed',
                                'bg-danger': order.order_status === 'Cancelled'
                            }">
                                    {{ order.order_status }}
                                </span>
                            </td>
                            <td>
                                <div class="order-actions">
                                    <button class="btn btn-sm btn-outline-primary" title="View Details">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-success" title="Edit"
                                        [routerLink]="'/admin/update-order/' + order.order_id">
                                        <i class="bi bi-pencil"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <nav class="d-flex justify-content-end mt-4">
                <ul class="pagination">
                    <li class="page-item"><a class="page-link" href="#">Previous</a></li>
                    <li class="page-item active"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item"><a class="page-link" href="#">Next</a></li>
                </ul>
            </nav>
        </div>

    </div>
</body>

</html>